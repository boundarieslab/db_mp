<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Visualization - Feiring Eidsvoll</title>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            margin: 20px;
            background: #f9f9f9;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
<div id="feiring-dal-network" style="width:100%; height:650px; background:#fff; position: relative; overflow: hidden; border: 1px solid #eee; margin: 0 auto; z-index:10; display:block;"><svg viewBox="0 0 669.734375 648" style="display: block; width: 100%; height: 100%;"><g><line stroke="#ddd" stroke-width="1" x1="367.58413400982647" y1="305.5150320801162" x2="425.3662667897358" y2="262.92746643674974"></line><line stroke="#ddd" stroke-width="1" x1="287.07714432112056" y1="342.6245238151856" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="345.5778772045374" y1="439.41894716568225" x2="287.07714432112056" y2="342.6245238151856"></line><line stroke="#ddd" stroke-width="1" x1="234.62324802920668" y1="275.90123245878766" x2="287.07714432112056" y2="342.6245238151856"></line><line stroke="#ddd" stroke-width="1" x1="266.97616800119016" y1="415.387564204871" x2="287.07714432112056" y2="342.6245238151856"></line><line stroke="#ddd" stroke-width="1" x1="333.6985255766734" y1="288.19477891677167" x2="287.07714432112056" y2="342.6245238151856"></line><line stroke="#ddd" stroke-width="1" x1="220.4626978487043" y1="352.6034714046571" x2="287.07714432112056" y2="342.6245238151856"></line><line stroke="#ddd" stroke-width="1" x1="419.4144889250275" y1="383.00334547360535" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="313.2577423241452" y1="225.55741781205208" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="443.38518590485046" y1="320.48720004421995" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="288.3907797395471" y1="286.46422351211595" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="378.0059084398416" y1="224.34002457664297" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="374.2139351285326" y1="366.3285179788533" x2="367.58413400982647" y2="305.5150320801162"></line><line stroke="#ddd" stroke-width="1" x1="326.1561548347791" y1="371.0323206583452" x2="367.58413400982647" y2="305.5150320801162"></line></g><g><g style="cursor: pointer;" transform="translate(425.3662667897358,262.92746643674974)"><circle r="25" fill="transparent"></circle><rect x="-6" y="-6" width="12" height="12" fill="#000000" stroke="#fff" stroke-width="1"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Ollendorff Holding AS</text></g><g style="cursor: pointer;" transform="translate(367.58413400982647,305.5150320801162)"><circle r="25" fill="transparent"></circle><rect x="-6" y="-6" width="12" height="12" fill="#000000" stroke="#fff" stroke-width="1"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring AS (Group)</text></g><g style="cursor: pointer;" transform="translate(287.07714432112056,342.6245238151856)"><circle r="25" fill="transparent"></circle><rect x="-5" y="-5" width="10" height="10" fill="#3b82f6" stroke="#fff" stroke-width="1"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Bruk AS</text></g><g style="cursor: pointer;" transform="translate(345.5778772045374,439.41894716568225)"><circle r="18" fill="transparent" stroke="#000" stroke-width="1" stroke-dasharray="2,2"><animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="10s" repeatCount="indefinite"></animateTransform></circle><circle r="25" fill="transparent"></circle><polygon points="-5,5 5,5 0,-5" transform="scale(1.5)" fill="#ff9500" stroke="#000" stroke-width="1.5"></polygon><text x="12" y="3" fill="#000" style="font: bold 10px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Bruk AS avd Dal Pukkverk</text></g><g style="cursor: pointer;" transform="translate(234.62324802920668,275.90123245878766)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#999" stroke-width="1" stroke-dasharray="2,2" fill="#ffffff"></rect><text x="12" y="3" fill="#ccc" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Grefsrud AS (INAKTIVT)</text></g><g style="cursor: pointer;" transform="translate(266.97616800119016,415.387564204871)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#999" stroke-width="1" stroke-dasharray="2,2" fill="#ffffff"></rect><text x="12" y="3" fill="#ccc" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Bjønndalen Bruk AS (INAKTIVT)</text></g><g style="cursor: pointer;" transform="translate(333.6985255766734,288.19477891677167)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#999" stroke-width="1" stroke-dasharray="2,2" fill="#ffffff"></rect><text x="12" y="3" fill="#ccc" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Hjera Pukkverk AS (INAKTIVT)</text></g><g style="cursor: pointer;" transform="translate(220.4626978487043,352.6034714046571)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#999" stroke-width="1" stroke-dasharray="2,2" fill="#ffffff"></rect><text x="12" y="3" fill="#ccc" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Hadeland Pukkverk AS (INAKTIVT)</text></g><g style="cursor: pointer;" transform="translate(419.4144889250275,383.00334547360535)"><circle r="25" fill="transparent"></circle><polygon points="-5,5 5,5 0,-5" fill="#ff9500" stroke="#fff" stroke-width="1"></polygon><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Vestfold AS</text></g><g style="cursor: pointer;" transform="translate(313.2577423241452,225.55741781205208)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#000" stroke-width="0.5" fill="#e0e0e0"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Asfalt AS</text></g><g style="cursor: pointer;" transform="translate(443.38518590485046,320.48720004421995)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#000" stroke-width="0.5" fill="#e0e0e0"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Lierfoss Transportsentral AS</text></g><g style="cursor: pointer;" transform="translate(288.3907797395471,286.46422351211595)"><circle r="25" fill="transparent"></circle><polygon points="0,-6 6,0 0,6 -6,0" fill="#39ff14" stroke="#fff" stroke-width="1"></polygon><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Miljø AS</text></g><g style="cursor: pointer;" transform="translate(378.0059084398416,224.34002457664297)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#000" stroke-width="0.5" fill="#e0e0e0"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Tentex AS</text></g><g style="cursor: pointer;" transform="translate(374.2139351285326,366.3285179788533)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#000" stroke-width="0.5" fill="#e0e0e0"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Feiring Eiendomsinvest AS</text></g><g style="cursor: pointer;" transform="translate(326.1561548347791,371.0323206583452)"><circle r="25" fill="transparent"></circle><rect x="-4" y="-4" width="8" height="8" stroke="#000" stroke-width="0.5" fill="#e0e0e0"></rect><text x="12" y="3" fill="#999" style="font: 9px Helvetica, Arial, sans-serif; pointer-events: none;">Lundhs X Feiring Aggregates AS</text></g></g></svg></div>

<div style="display:flex; flex-wrap:wrap; gap:12px; font:9px Helvetica,Arial,sans-serif; color:#000; padding:10px 0; justify-content: center; text-transform: uppercase; letter-spacing: 0.5px; position:relative; z-index:10;">
    <div style="display:flex; align-items:center; gap:4px;">
        <svg height="10" style="overflow:visible" width="10"><rect fill="#000" height="6" transform="translate(5,5)" width="6" x="-3" y="-3"></rect></svg>&nbsp;Parent
 &nbsp; &nbsp;</div>
    <div style="display:flex; align-items:center; gap:4px;">
        <svg height="10" style="overflow:visible" width="10"><rect fill="#e0e0e0" height="6" stroke="#000" stroke-width="0.5" transform="translate(5,5)" width="6" x="-3" y="-3"></rect></svg>&nbsp;Sub
 &nbsp; &nbsp;</div>
    <div style="display:flex; align-items:center; gap:4px;">
        <svg height="10" style="overflow:visible" width="10"><rect fill="#3b82f6" height="6" transform="translate(5,5)" width="6" x="-3" y="-3"></rect></svg>&nbsp;Operator
 &nbsp; &nbsp;</div>
    <div style="display:flex; align-items:center; gap:4px;">
        <svg height="10" style="overflow:visible" width="10"><polygon fill="#ff9500" points="-4,4 4,4 0,-4" transform="translate(5,5)"></polygon></svg>&nbsp;Pukkverk
 &nbsp; &nbsp;</div>
    <div style="display:flex; align-items:center; gap:4px;">
        <svg height="10" style="overflow:visible" width="10"><rect fill="#fff" height="6" stroke="#999" stroke-dasharray="2,2" stroke-width="1" transform="translate(5,5)" width="6" x="-3" y="-3"></rect></svg>&nbsp;Inaktivt
 &nbsp; &nbsp;</div>
</div>

<script>
(function(){
    // --- 1. CONFIG ---
    var containerID = "feiring-dal-network"; 

    var NODES = [
        // HOLDING
        {id:"Ollendorff Holding AS", t:"p"},
        {id:"Feiring AS", t:"p", l:"(Group)"},

        // OPERATOR
        {id:"Feiring Bruk AS", t:"op"},

        // ACTIVE SITE (The specific department)
        {id:"Feiring Bruk AS avd Dal Pukkverk", t:"pukk", active:true},

        // INACTIVE ENTITIES (Marked with type 'inactive')
        {id:"Grefsrud AS", t:"inactive", l:"(INAKTIVT)"},
        {id:"Bjønndalen Bruk AS", t:"inactive", l:"(INAKTIVT)"},
        {id:"Hjera Pukkverk AS", t:"inactive", l:"(INAKTIVT)"},
        {id:"Hadeland Pukkverk AS", t:"inactive", l:"(INAKTIVT)"},

        // ACTIVE SISTERS
        {id:"Feiring Vestfold AS", t:"pukk"},
        {id:"Feiring Asfalt AS", t:"s"},
        {id:"Lierfoss Transportsentral AS", t:"s"},
        {id:"Feiring Miljø AS", t:"mottak"},
        {id:"Tentex AS", t:"s"},
        {id:"Feiring Eiendomsinvest AS", t:"s"},
        {id:"Lundhs X Feiring Aggregates AS", t:"s"}
    ];
    
    var LINKS = [
        // Hierarchy
        ["Feiring AS", "Ollendorff Holding AS"],
        ["Feiring Bruk AS", "Feiring AS"],
        
        // Active Site to Operator
        ["Feiring Bruk AS avd Dal Pukkverk", "Feiring Bruk AS"],

        // Inactive Companies (History under Feiring Bruk or AS)
        ["Grefsrud AS", "Feiring Bruk AS"],
        ["Bjønndalen Bruk AS", "Feiring Bruk AS"],
        ["Hjera Pukkverk AS", "Feiring Bruk AS"],
        ["Hadeland Pukkverk AS", "Feiring Bruk AS"],

        // Sisters
        ["Feiring Vestfold AS", "Feiring AS"],
        ["Feiring Asfalt AS", "Feiring AS"],
        ["Lierfoss Transportsentral AS", "Feiring AS"],
        ["Feiring Miljø AS", "Feiring AS"],
        ["Tentex AS", "Feiring AS"],
        ["Feiring Eiendomsinvest AS", "Feiring AS"],
        ["Lundhs X Feiring Aggregates AS", "Feiring AS"]
    ];

    var COLORS = {
        p: "#000000", s: "#e0e0e0", op: "#3b82f6",      
        deponi: "#ff003c", pukk: "#ff9500", mottak: "#39ff14", inactive: "#ffffff"
    };

    var el = document.getElementById(containerID);
    // Safety dimensions
    var W = el.offsetWidth || 800;
    var H = el.offsetHeight || 600;
    
    var svg, nodes=[], links=[], parentMap={}, childrenMap={};

    function getStrictLineage(startNode) {
        let pathNodes = new Set();
        let pathLinks = new Set();
        pathNodes.add(startNode);
        
        let curr = startNode;
        while(curr) {
            let parentId = parentMap[curr.id];
            if(!parentId) break;
            let parentNode = nodes.find(n => n.id === parentId);
            if(parentNode) {
                let link = links.find(l => (l.s === curr && l.t === parentNode) || (l.t === curr && l.s === parentNode));
                if(link) pathLinks.add(link);
                pathNodes.add(parentNode);
                curr = parentNode;
            } else break;
        }

        function addChildren(pNode) {
            let kids = childrenMap[pNode.id] || [];
            kids.forEach(kidId => {
                let kNode = nodes.find(n => n.id === kidId);
                if(kNode) {
                    let link = links.find(l => (l.s === kNode && l.t === pNode) || (l.t === kNode && l.s === pNode));
                    if(link) pathLinks.add(link);
                    pathNodes.add(kNode);
                    addChildren(kNode);
                }
            });
        }
        addChildren(startNode);
        return {nodes: pathNodes, links: pathLinks};
    }

    function createShape(type, isActive) {
        var ns = "http://www.w3.org/2000/svg";
        var shape;
        if (type === 'p') { 
            shape = document.createElementNS(ns, "rect");
            shape.setAttribute("x", -6); shape.setAttribute("y", -6);
            shape.setAttribute("width", 12); shape.setAttribute("height", 12);
        } else if (type === 's') { 
            shape = document.createElementNS(ns, "rect");
            shape.setAttribute("x", -4); shape.setAttribute("y", -4);
            shape.setAttribute("width", 8); shape.setAttribute("height", 8);
            shape.setAttribute("stroke", "#000"); shape.setAttribute("stroke-width", "0.5");
        } else if (type === 'op') { 
            shape = document.createElementNS(ns, "rect");
            shape.setAttribute("x", -5); shape.setAttribute("y", -5);
            shape.setAttribute("width", 10); shape.setAttribute("height", 10);
        } else if (type === 'pukk') { 
            shape = document.createElementNS(ns, "polygon");
            shape.setAttribute("points", "-5,5 5,5 0,-5");
        } else if (type === 'mottak') { 
            shape = document.createElementNS(ns, "polygon");
            shape.setAttribute("points", "0,-6 6,0 0,6 -6,0");
        } else if (type === 'inactive') {
            // Dashed Box for inactive
            shape = document.createElementNS(ns, "rect");
            shape.setAttribute("x", -4); shape.setAttribute("y", -4);
            shape.setAttribute("width", 8); shape.setAttribute("height", 8);
            shape.setAttribute("stroke", "#999"); 
            shape.setAttribute("stroke-width", "1");
            shape.setAttribute("stroke-dasharray", "2,2");
        } else { 
            shape = document.createElementNS(ns, "circle");
            shape.setAttribute("r", 4);
        }
        
        if(isActive && type !== 'p' && type !== 's') {
            shape.setAttribute("transform", "scale(1.5)");
        }
        return shape;
    }

    function init() {
        if(!el) return;
        
        LINKS.forEach(pair => {
            let child = pair[0];
            let parent = pair[1];
            parentMap[child] = parent;
            if(!childrenMap[parent]) childrenMap[parent] = [];
            childrenMap[parent].push(child);
        });

        const resizeObserver = new ResizeObserver(entries => {
            for (let entry of entries) {
                W = entry.contentRect.width || el.offsetWidth || 800;
                H = entry.contentRect.height || el.offsetHeight || 600;
                if(svg) svg.setAttribute("viewBox", "0 0 " + W + " " + H);
            }
        });
        resizeObserver.observe(el);
        
        el.innerHTML = "";
        var ns = "http://www.w3.org/2000/svg";
        svg = document.createElementNS(ns, "svg");
        svg.setAttribute("viewBox", "0 0 " + W + " " + H);
        svg.style.display = "block";
        svg.style.width = "100%";
        svg.style.height = "100%";
        el.appendChild(svg);

        nodes = NODES.map(d => ({
            id: d.id, type: d.t, label: d.l, active: d.active,
            x: W/2 + (Math.random()-0.5)*50,
            y: H/2 + (Math.random()-0.5)*50,
            vx: 0, vy: 0
        }));

        links = [];
        LINKS.forEach(pair => {
            var s = nodes.find(n=>n.id===pair[0]);
            var t = nodes.find(n=>n.id===pair[1]);
            if(s && t) links.push({s:s, t:t});
        });

        var linkG = document.createElementNS(ns, "g");
        svg.appendChild(linkG);
        links.forEach(l => {
            var line = document.createElementNS(ns, "line");
            line.setAttribute("stroke", "#ddd");
            line.setAttribute("stroke-width", "1");
            linkG.appendChild(line);
            l.el = line;
        });

        var nodeG = document.createElementNS(ns, "g");
        svg.appendChild(nodeG);

        nodes.forEach(n => {
            var g = document.createElementNS(ns, "g");
            g.style.cursor = "pointer";
            
            if (n.active) {
                var ring = document.createElementNS(ns, "circle");
                ring.setAttribute("r", 18);
                ring.setAttribute("fill", "transparent");
                ring.setAttribute("stroke", "#000");
                ring.setAttribute("stroke-width", "1");
                ring.setAttribute("stroke-dasharray", "2,2");
                var anim = document.createElementNS(ns, "animateTransform");
                anim.setAttribute("attributeName", "transform");
                anim.setAttribute("type", "rotate");
                anim.setAttribute("from", "0 0 0");
                anim.setAttribute("to", "360 0 0");
                anim.setAttribute("dur", "10s");
                anim.setAttribute("repeatCount", "indefinite");
                ring.appendChild(anim);
                g.appendChild(ring);
            }

            var hit = document.createElementNS(ns, "circle");
            hit.setAttribute("r", 25); hit.setAttribute("fill", "transparent");
            g.appendChild(hit);

            var shape = createShape(n.type, n.active);
            shape.setAttribute("fill", COLORS[n.type] || "#999");
            if (n.active) { 
                shape.setAttribute("stroke", "#000"); 
                shape.setAttribute("stroke-width", "1.5"); 
            } else if (n.type !== 's' && n.type !== 'inactive') { 
                shape.setAttribute("stroke", "#fff"); 
                shape.setAttribute("stroke-width", "1"); 
            }
            g.appendChild(shape);
            n.shapeEl = shape;

            var txt = document.createElementNS(ns, "text");
            var textContent = n.id;
            if(n.label) textContent += " " + n.label;
            txt.textContent = textContent;
            txt.setAttribute("x", 12); txt.setAttribute("y", 3);
            
            // Dim text for inactive
            var txtColor = (n.type === 'inactive') ? "#ccc" : (n.active ? "#000" : "#999");
            txt.setAttribute("fill", txtColor); 
            
            txt.style.font = n.active ? "bold 10px Helvetica, Arial, sans-serif" : "9px Helvetica, Arial, sans-serif"; 
            txt.style.pointerEvents = "none";
            g.appendChild(txt);
            n.tEl = txt;

            g.onmouseenter = function() {
                var lineage = getStrictLineage(n);
                nodes.forEach(node => {
                    node.shapeEl.setAttribute("opacity", "0.1");
                    node.tEl.setAttribute("opacity", "0.1");
                });
                links.forEach(link => {
                    link.el.setAttribute("stroke", "#eee");
                    link.el.setAttribute("opacity", "0.1");
                });
                lineage.nodes.forEach(node => {
                    node.shapeEl.setAttribute("opacity", "1");
                    node.tEl.setAttribute("opacity", "1");
                    node.tEl.setAttribute("fill", node.type === 'inactive' ? "#999" : "#000");
                });
                lineage.links.forEach(link => {
                    link.el.setAttribute("stroke", "#000"); 
                    link.el.setAttribute("opacity", "1");
                });
                n.shapeEl.setAttribute("transform", "scale(1.3)");
            };

            g.onmouseleave = function() {
                nodes.forEach(node => {
                    node.shapeEl.setAttribute("opacity", "1");
                    node.tEl.setAttribute("opacity", "1");
                    
                    var color = (node.type === 'inactive') ? "#ccc" : (node.active ? "#000" : "#999");
                    node.tEl.setAttribute("fill", color);
                    
                    if(!node.active) node.shapeEl.setAttribute("transform", "scale(1)");
                });
                links.forEach(link => {
                    link.el.setAttribute("stroke", "#ddd");
                    link.el.setAttribute("opacity", "1");
                });
            };

            g.onmousedown = function(e){ e.preventDefault(); n.dragging = true; };
            nodeG.appendChild(g);
            n.el = g;
        });

        window.addEventListener("mousemove", function(e){
            nodes.forEach(n => {
                if(n.dragging) {
                    var rect = svg.getBoundingClientRect();
                    n.x = (e.clientX - rect.left) * (W/rect.width);
                    n.y = (e.clientY - rect.top) * (H/rect.height);
                    n.vx = 0; n.vy = 0;
                }
            });
        });
        window.addEventListener("mouseup", function(){ nodes.forEach(n => n.dragging = false); });

        requestAnimationFrame(tick);
    }

    function tick() {
        links.forEach(l => {
            var dx = l.t.x - l.s.x; var dy = l.t.y - l.s.y;
            var dist = Math.sqrt(dx*dx + dy*dy) || 1;
            var restLen = 60;
            if(l.s.active || l.t.active) restLen = 100;
            var force = (dist - restLen) * 0.05;
            var fx = (dx/dist)*force; var fy = (dy/dist)*force;
            l.s.vx += fx; l.s.vy += fy; l.t.vx -= fx; l.t.vy -= fy;
        });

        nodes.forEach(n => {
            nodes.forEach(n2 => {
                if(n===n2) return;
                var dx = n.x - n2.x; var dy = n.y - n2.y;
                var dist = Math.sqrt(dx*dx + dy*dy) || 1;
                if(dist < 100) { 
                    var f = (100-dist) * 0.05; 
                    n.vx += (dx/dist)*f; n.vy += (dy/dist)*f; 
                }
            });
            n.vx += (W/2 - n.x) * 0.02; 
            n.vy += (H/2 - n.y) * 0.02;
            
            if(!n.dragging) { n.x += n.vx; n.y += n.vy; n.vx *= 0.85; n.vy *= 0.85; }
            n.x = Math.max(20, Math.min(W - 40, n.x));
            n.y = Math.max(20, Math.min(H - 20, n.y));
            if(n.el) n.el.setAttribute("transform", "translate("+n.x+","+n.y+")");
        });

        links.forEach(l => {
            if(l.el) {
                l.el.setAttribute("x1", l.s.x); l.el.setAttribute("y1", l.s.y);
                l.el.setAttribute("x2", l.t.x); l.el.setAttribute("y2", l.t.y);
            }
        });
        if(document.contains(el)) requestAnimationFrame(tick);
    }
    setTimeout(init, 500);
})();
</script>
    </div>
</body>
</html>